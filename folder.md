# Container Monitor

A modular C++ application for real-time container resource monitoring, designed for automotive and embedded use cases.

## Folder Structure & Module Overview

```
App/
├── main.cpp                # Entry point for the application
├── CMakeLists.txt          # Top-level build configuration
├── build/                  # Build output (generated by CMake)
├── thirdparty/             # External dependencies (e.g., nlohmann_json, sqlite3)
├── analysis/               # Resource thresholding, color mapping, violation logging
│   ├── inc/
│   │   ├── color_mapper.hpp
│   │   ├── violation_logger.hpp
│   │   └── threshold_service.hpp
│   └── src/
│       ├── color_mapper.cpp
│       ├── violation_logger.cpp
│       └── threshold_service.cpp
├── ui/                     # Terminal dashboard and user interface
│   ├── inc/
│   │   └── monitor_dashboard.hpp
│   └── src/
│       └── monitor_dashboard.cpp
├── kernel/                 # Low-level resource reading and metrics calculation
│   ├── inc/
│   │   ├── metrics_calculator.hpp
│   │   └── resource_reader.hpp
│   └── src/
│       ├── metrics_calculator.cpp
│       └── resource_reader.cpp
├── database/               # Database interface and SQLite backend
│   ├── inc/
│   │   ├── database_interface.hpp
│   │   └── sqlite_database.hpp
│   └── src/
│       ├── database_interface.cpp
│       └── sqlite_database.cpp
├── utils/                  # Common utilities: logging, config parsing, time helpers
│   ├── inc/
│   │   ├── logger.hpp
│   │   ├── time_utils.hpp
│   │   └── config_parser.hpp
│   └── src/
│       ├── logger.cpp
│       ├── config_parser.cpp
│       └── time_utils.cpp
├── cgroup/                 # cgroup v1/v2 resource access and factory
│   ├── inc/
│   │   ├── cgroup_v1_service.hpp
│   │   ├── cgroup_v2_service.hpp
│   │   └── cgroup_factory.hpp
│   └── src/
│       ├── cgroup_v1_service.cpp
│       ├── cgroup_v2_service.cpp
│       └── cgroup_factory.cpp
├── runtime/                # Container runtime abstraction (Docker, Podman)
│   ├── inc/
│   │   ├── docker_runtime.hpp
│   │   ├── podman_runtime.hpp
│   │   └── runtime_command_factory.hpp
│   └── src/
│       ├── docker_runtime.cpp
│       ├── podman_runtime.cpp
│       └── runtime_command_factory.cpp
```

## Module Responsibilities

- **main.cpp**: Starts the application, initializes modules, and runs the main monitoring loop.
- **analysis**: Implements resource threshold checks, maps resource usage to colors for UI, and logs violations.
- **ui**: Provides a terminal-based dashboard for real-time monitoring using ncurses.
- **kernel**: Reads system metrics and calculates statistics from cgroups and kernel interfaces.
- **database**: Abstracts database operations; uses SQLite for fast, local timeseries storage.
- **utils**: Shared utilities for logging, configuration parsing, and time management.
- **cgroup**: Handles cgroup v1/v2 resource access and provides a factory for selecting the correct implementation.
- **runtime**: Abstracts container runtime operations (Docker/Podman), command construction, and runtime queries.
- **thirdparty**: Contains external libraries (e.g., nlohmann_json, sqlite3) used by the project.
- **build**: Output directory for compiled binaries and libraries (created by CMake).

## Build Instructions

```bash
cd App
mkdir -p build
cd build
cmake ..
make -j$(nproc)
./container_monitor
```

## Dependencies

- SQLite3 (database)
- ncurses (UI)
- glog (logging)
- nlohmann_json (JSON parsing)

## Extending

Add new modules by creating a folder with `inc/` and `src/`, then update the top-level `CMakeLists.txt` to include it.

---

Let me know if you want to add usage examples, contributor info, or more details for