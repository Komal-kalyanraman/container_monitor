<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Container Monitor: Container Monitor Architecture</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Container Monitor
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">Container Monitor is a C++ service for managing logging, monitoring, and alerting for containerized applications.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__home_komal_workspace_personal_container_monitor_docs_architecture_architecture.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Container Monitor Architecture </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md16"></a>
Overview</h1>
<p><b>Container Monitor</b> is a modular, extensible, and real-time C++ monitoring solution designed for embedded, and automotive environments. The system is architected for reliability, low overhead, and ease of integration, providing live and historical resource metrics for containerized workloads running on ECUs, gateways, and test benches.</p>
<p>The architecture emphasizes separation of concerns, configurability, and extensibility—enabling support for multiple container runtimes (Docker, Podman), cgroup versions, and storage backends. All runtime parameters are centralized, and the system is designed for both operator and developer usability, with a focus on diagnostics, validation, and post-analysis.</p>
<p><b>Key architectural highlights:</b></p>
<ul>
<li><b>Modular C++ Codebase:</b> <br  />
 Each subsystem (analysis, runtime, database, metrics, monitoring, UI, utils) is isolated for maintainability and extensibility.</li>
<li><b>Centralized Configuration:</b> <br  />
 All runtime parameters are managed/tuned via a single config file (<code>parameter.conf</code>), with a GUI for safe editing.</li>
<li><b>Real-Time &amp; Post-Analysis:</b> <br  />
 Live ncurses dashboard for operators, and CSV/DB export for in-depth post-analysis.</li>
<li><b>Thread Pool &amp; Batch Processing:</b> <br  />
 Efficient, scalable resource collection using a thread pool and batch sampling.</li>
<li><b>Extensible Storage:</b> <br  />
 Supports both CSV and SQLite (with future support for more databases).</li>
<li><b>Operator &amp; Developer Friendly:</b> <br  />
 Tkinter GUI for config, color-coded UI, Tkinter GUI for post analysis of logs and Doxygen documentation.</li>
</ul>
<p><b>Intended Audience:</b> <br  />
 Developers, system integrators, and engineers seeking a robust, real-time container monitoring foundation for automotive and embedded deployments.</p>
<p><b>Design Philosophy:</b></p>
<ul>
<li><b>Separation of Concerns:</b> Each module (analysis, runtime, database, monitoring, UI, utils) is isolated and replaceable.</li>
<li><b>Extensibility:</b> New runtimes, metrics, and storage backends can be added with minimal changes.</li>
<li><b>Operator Focus:</b> Real-time, color-coded UI and safe configuration workflow.</li>
<li><b>Production Focus:</b> Centralized config, robust error handling, and post-analysis support.</li>
</ul>
<p>This document provides a deep dive into the system architecture, component responsibilities, data flow, extensibility points, and the design patterns that make Container Monitor a robust foundation for modern container monitoring needs.</p>
<h1><a class="anchor" id="autotoc_md17"></a>
System Architecture</h1>
<h1><a class="anchor" id="autotoc_md18"></a>
Folder Structure</h1>
<div class="fragment"><div class="line">App/ </div>
<div class="line">├── analysis/           # Live metrics aggregation logic </div>
<div class="line">├── build/              # Build artifacts (CMake, binaries, etc.) </div>
<div class="line">├── container_runtime/  # Container runtime configuration and path factories </div>
<div class="line">├── database/           # Database interface and SQLite implementation </div>
<div class="line">├── metrics_analyzer/   # Metrics reading and analysis logic </div>
<div class="line">├── monitoring_service/ # Event listeners, processors, resource monitoring, threadpool </div>
<div class="line">├── thirdparty/         # External dependencies (if any) </div>
<div class="line">├── ui/                 # Ncurses dashboard and UI logic </div>
<div class="line">├── utils/              # Common utilities (config parsing, logging, types) </div>
<div class="line">└── main.cpp            # Application entry point</div>
<div class="line"> </div>
<div class="line">config/ </div>
<div class="line">├── create_config_gui.py    # Tkinter GUI for config generation </div>
<div class="line">└── parameter.conf          # Centralized configuration file</div>
<div class="line"> </div>
<div class="line">storage/ </div>
<div class="line">├── container_metrics.csv   # Exported container metrics </div>
<div class="line">├── host_usage.csv          # Exported host metrics </div>
<div class="line">└── metrics.db              # SQLite database</div>
<div class="line"> </div>
<div class="line">post_analysis/ </div>
<div class="line">└── plot_container_metrics.py # Post-analysis plotting scripts</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md19"></a>
Design Patterns Used</h1>
<ul>
<li><b>Factory Pattern:</b> <br  />
 Used for instantiating container runtime handlers and cgroups configuration objects. <br  />
 <em>Location:</em> <code>container_runtime/</code></li>
<li><b>Observer Pattern:</b> <br  />
 Event listeners and processors react to container events and resource updates. <br  />
 <em>Location:</em> <code>monitoring_service/</code></li>
<li><b>Thread Pool Pattern:</b> <br  />
 Efficient, concurrent resource monitoring using a thread pool. <br  />
 <em>Location:</em> <code>monitoring_service/resource_thread_pool.*</code></li>
<li><b>Strategy/Interface Pattern:</b> <br  />
 Abstract interfaces for database backends and runtime configuration. <br  />
 <em>Location:</em> <code>database/</code>, <code>container_runtime/</code></li>
<li><b>Singleton Pattern:</b> <br  />
 Centralized config parser and logger utilities. <br  />
 <em>Location:</em> <code>utils/</code></li>
</ul>
<p>These patterns ensure modularity, extensibility, and maintainability.</p>
<h1><a class="anchor" id="autotoc_md20"></a>
Component Descriptions</h1>
<h2><a class="anchor" id="autotoc_md21"></a>
1. Analysis Layer (&lt;tt&gt;analysis/&lt;/tt&gt;)</h2>
<ul>
<li><b>Live Metric Aggregator:</b> <br  />
 Aggregates and processes live resource metrics for containers, supporting real-time and historical analysis.</li>
</ul>
<h2><a class="anchor" id="autotoc_md22"></a>
2. Container Runtime Layer (&lt;tt&gt;container_runtime/&lt;/tt&gt;)</h2>
<ul>
<li><b>Runtime Configuration &amp; Factory:</b> <br  />
 Abstracts the details of different container runtimes (Docker, Podman), cgroup versions and path resolution.</li>
</ul>
<h2><a class="anchor" id="autotoc_md23"></a>
3. Database Layer (&lt;tt&gt;database/&lt;/tt&gt;)</h2>
<ul>
<li><b>Database Interface:</b> <br  />
 Abstracts storage of historical metrics, supporting both CSV and SQLite (with future extensibility).</li>
</ul>
<h2><a class="anchor" id="autotoc_md24"></a>
4. Metrics Analyzer Layer (&lt;tt&gt;metrics_analyzer/&lt;/tt&gt;)</h2>
<ul>
<li><b>Metrics Reader:</b> <br  />
 Reads and parses resource usage data from cgroup files and runtime APIs.</li>
</ul>
<h2><a class="anchor" id="autotoc_md25"></a>
5. Monitoring Service Layer (&lt;tt&gt;monitoring_service/&lt;/tt&gt;)</h2>
<ul>
<li><b>Event Listener &amp; Processor:</b> <br  />
 Listens for container lifecycle events and processes resource updates.</li>
<li><b>Resource Monitor &amp; Thread Pool:</b> <br  />
 Periodically samples resource usage using a thread pool for scalability.</li>
</ul>
<h2><a class="anchor" id="autotoc_md26"></a>
6. UI Layer (&lt;tt&gt;ui/&lt;/tt&gt;)</h2>
<ul>
<li><b>Ncurses Dashboard:</b> <br  />
 Provides a real-time, color-coded, and dynamically aligned dashboard for operators.</li>
</ul>
<h2><a class="anchor" id="autotoc_md27"></a>
7. Utilities (&lt;tt&gt;utils/&lt;/tt&gt;)</h2>
<ul>
<li><b>Config Parser:</b> <br  />
 Centralized configuration management, supporting both file and GUI-based editing.</li>
<li><b>Logger:</b> <br  />
 Centralized logging for diagnostics and debugging.</li>
<li><b>Common Types:</b> <br  />
 Shared data structures and helpers.</li>
</ul>
<h2><a class="anchor" id="autotoc_md28"></a>
8. Post-Analysis (&lt;tt&gt;post_analysis/&lt;/tt&gt;)</h2>
<ul>
<li><b>Plotting Scripts:</b> <br  />
 Tkinter/matplotlib-based dashboard for interactive post-analysis of exported metrics.</li>
</ul>
<h1><a class="anchor" id="autotoc_md29"></a>
Data Flow</h1>
<ol type="1">
<li><b>Configuration:</b> <br  />
 The system loads all runtime parameters from <code>parameter.conf</code> (optionally generated/validated via the Tkinter GUI).</li>
<li><b>Container Discovery:</b> <br  />
 The runtime layer discovers running containers using the configured runtime (Docker/Podman) and cgroup version.</li>
<li><b>Resource Sampling:</b> <br  />
 The monitoring service periodically samples resource usage (CPU, memory, PIDs, etc) for each container using a thread pool.</li>
<li><b>Live Aggregation &amp; UI:</b> <br  />
 Metrics are aggregated and displayed in real-time on the ncurses dashboard, with color-coded alerts and dynamic alignment.</li>
<li><b>Event Handling:</b> <br  />
 Event listeners detect container start/stop events and update the monitoring set accordingly.</li>
<li><b>Export &amp; Storage:</b> <br  />
 Metrics are exported to CSV and/or SQLite for traceability and post-analysis.</li>
<li><b>Post-Analysis:</b> <br  />
 The exported data can be visualized interactively using the provided plotting scripts.</li>
</ol>
<h1><a class="anchor" id="autotoc_md30"></a>
Extensibility</h1>
<ul>
<li><b>Add a Container Runtime:</b> <br  />
 Implement a new runtime handler in <code>container_runtime/</code> and update the factory.</li>
<li><b>Add a Metric:</b> <br  />
 Extend the metrics analyzer and aggregator to collect and process new cgroup parameters (e.g., I/O, network).</li>
<li><b>Add a Storage Backend:</b> <br  />
 Implement a new database interface in <code>database/</code>.</li>
<li><b>Add a UI Feature:</b> <br  />
 Extend the ncurses dashboard or post-analysis scripts for new visualizations.</li>
<li><b>Add a Config Option:</b> <br  />
 Update the config parser and GUI to support new parameters.</li>
</ul>
<h1><a class="anchor" id="autotoc_md31"></a>
Architecture Diagram</h1>
<div align="center" style="width:90%;"></div><div align="center" style="width:90%;"> <div class="image">
<img src="architecture_diagram.png" alt=""/>
<div class="caption">
Architecture Diagram</div></div>
   </div><div align="center" style="width:90%;"></div><h1><a class="anchor" id="autotoc_md32"></a>
Sequence Diagram</h1>
<div align="center" style="width:90%;"></div><div align="center" style="width:90%;"> <div class="image">
<img src="sequence_diagram.png" alt=""/>
<div class="caption">
Sequence Diagram</div></div>
   </div><div align="center" style="width:90%;"></div><h1><a class="anchor" id="autotoc_md33"></a>
Deployment Diagram</h1>
<div align="center" style="width:90%;"></div><div align="center" style="width:90%;"> <div class="image">
<img src="deployment_diagram.png" alt=""/>
<div class="caption">
Deployment Diagram</div></div>
   </div><div align="center" style="width:90%;"></div><h1><a class="anchor" id="autotoc_md34"></a>
References</h1>
<ul>
<li><a href="../doxygen/html/index.html">Doxygen Documentation</a></li>
<li>../../README.md "README.md"</li>
</ul>
<hr  />
<p>_For questions, suggestions, or contributions, please open an issue or pull request on </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
